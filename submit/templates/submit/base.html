{%- extends "base/base.html" %}

{% import "submit/submit_macros.html" as submit_macros %}

{% block addl_head %}
 <link rel="stylesheet" href="{{ url_for('static', filename='css/submit.css')}}" />
 {% block extra_head %}{% endblock %}
{% endblock addl_head %}

{% block content %}

  {# Sometimes we need to show an alert immediately, without a redirect. #}
  {% block immediate_alerts %}
    {% if immediate_alerts -%}
        <div class="notifications" role="alert">
          {% for category, message in immediate_alerts -%}
            <div class="notification is-{{ category }}">
              {% if message.dismissable %}<button class="delete notification-dismiss"></button>{% endif %}
              {% if message.title %}<h2 class="is-size-5 is-marginless">{{ message.title }}</h2>{%- endif %}
              <p>{{ message.message }}</p>
            </div>
          {%- endfor %}
        </div>
      {%- endif %}
  {% endblock %}

{% if submission_id and workflow %}
  {{ submit_macros.progress_bar(submission_id, workflow, this_stage) }}
{% endif %}
  <h1 class="title">
    {% block title_preamble %}{% if submission and submission.version > 1 %}Submit a Replacement{% else %}Submit an Article{% endif %}: {% endblock %}{% block title %}{% endblock title %}
  </h1>
  {% if submission and submission.version > 1 %}
    {# TODO: change this when we have better semantics on Submission domain class (e.g. last announced version) #}
    <h2 class="replacement is-size-5 subtitle">Replacing arXiv:{{ submission.arxiv_id }}v{{ submission.version - 1 }} {{ submission.metadata.title }}</h2>
  {% endif %}
    {% if form and form.errors %}
      {% if form.errors.events %}
      <div class="notification is-danger">
        {% for error in form.errors.events -%}
        <li>{{ error }}</li>
        {%- endfor %}
      </div>
      {% endif %}
    {% endif %}
    {% block within_content %}
      Specific content here
    {% endblock within_content %}
{% endblock content %}
